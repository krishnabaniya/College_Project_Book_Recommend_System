{% extends "base.html" %}
{% block title %}Recommend{% endblock %}

{% block content %}
<div class="container my-4">
    <h1 class="text-center"><i class="fa-solid fa-star"></i> Recommended Books</h1>

    {% if error %}
    <div class="alert alert-danger">{{ error }}</div>
    {% endif %}

    <form method="post" action="/recommend_books" class="mb-4" id="recommendForm">
        <input type="text" name="user_input" class="form-control" placeholder="Enter a book title" required>
        <button type="submit" class="btn btn-warning mt-2" id="submitBtn">Submit</button>
    </form>

    <div class="row g-4">
        {% for i in data %}
        <div class="col-sm-6 col-md-4 col-lg-3">
            <div class="card">
                <img class="card-img-top" src="{{ i[2] }}" alt="Book cover for {{ i[0] }}">
                <div class="card-body">
                    <h5>{{ i[0] }}</h5>
                    <p>{{ i[1] }}</p>
                </div>
            </div>
        </div>
        {% else %}
        <p class="text-center">No recommendations to display. Please enter a book title to get suggestions.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const form = document.getElementById("recommendForm");
        const submitBtn = document.getElementById("submitBtn");

        form.addEventListener("submit", function(event) {
            const userInput = form.querySelector("input[name='user_input']").value;
            if (userInput.trim() === "") {
                alert("Please enter a book title.");
                event.preventDefault();
                return;
            }
            submitBtn.disabled = true;  // optional: disable button on submit
        });
    });
</script>
{% endblock %}
